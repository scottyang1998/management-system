# GIT的远程备份

## 实验目的

1. 学习Git软件的使用，新建一个Git仓库并远程关联

## 实验平台

- Windows 10

  

## 实验前准备

1. 下载并安装Git
2. 翻阅相关资料，掌握分布式版本控制系统 Git 的基础知识
3. 查找 Git 的使用教程，熟悉 Git 命令以及 Git GUI 的使用



## 实验背景

#### Remote

1. 为了能在任意 Git 项目上协作，你需要知道如何管理自己的远程仓库。 远程仓库是指托管在因特网或其他网络中的你的项目的版本库。 你可以有好几个远程仓库，通常有些仓库对你只读，有些则可以读写。 与他人协作涉及管理远程仓库以及根据需要推送或拉取数据。 管理远程仓库包括了解如何添加远程仓库、移除无效的远程仓库、管理不同的远程分支并定义它们是否被跟踪等等。 

2. 我们也可以新建远程实现本地备份，可以把数据备份到U 盘上，随身携带，特别是当无法联网时，这种备份很有用。
3. 如果想查看你已经配置的远程仓库服务器，可以运行 `git remote` 命令。 它会列出你指定的每一个远程服务器的简写。 



## 实验内容

### 添加远程

1. 打开Git GUI - Remote - Add
2. 填上备份仓库名和备份地址，Further Action选择第二个：初始化远程仓库并PUSH

![image-20200416133719331](C:\Users\杨道潮\AppData\Roaming\Typora\typora-user-images\image-20200416133719331.png)

### 遇到问题

1. 在上一步提交后，push不成功

![image-20200416134130793](C:\Users\杨道潮\AppData\Roaming\Typora\typora-user-images\image-20200416134130793.png)

2. 尝试自己在备份仓库新建git仓库

3. 在备份目录下使用git bash命令行

   > $git init

4. 再回到Git GUI打开 Remote - Add，Further Action选择第一个：不初始化仓库，又弹出以下报错

   > mote: error: By default, updating the current branch in a non-bare repository
   >
   > remote: error: is denied, because it will make the index and work tree inconsistent
   >
   > [remote rejected] master -> master (branch is currently checked out)

### 问题分析

​	如果使用了git init初始化，则远程仓库的目录下，也包含work tree，当本地仓库向远程仓库push时, 如果远程仓库正在push的分支上（如果当时不在push的分支，就没有问题）, 那么push后的结果不会反应在work tree上,  也即在远程仓库的目录下对应的文件还是之前的内容。

### 解决办法

1. 这是由于git默认拒绝了push操作，需要进行设置，修改.git/config文件后面添加如下代码：

> [receive]
> denyCurrentBranch = ignore

2. 无法查看push后的git中文件的原因与解决方法

   在初始化远程仓库时最好使用如下命令

> git --bare init

3. 重新操作新增远程步骤，打开Git GUI后commit和push，结果截图如下

![image-20200416140202186](C:\Users\杨道潮\AppData\Roaming\Typora\typora-user-images\image-20200416140202186.png)

![](C:\Users\杨道潮\Desktop\Snipaste_2020-04-16_13-21-10.png)



## 实验总结

在这次实验中初次学习使用 Git，是一个很难忘的体验。Git的管理是在本地建立存储仓库，代码的所有变化的记录都在本地存储。也就是代码和管理仓库是形影不理的。在学习Git新建远程的过程中，还了解并使用到了Git其他命令，如git rebase、git reset等等，更加加深了对Git的理解。